(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(12),l=t.n(r),c=t(14),i=t(13),u=function(e){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:e.addPerson},e.children,o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var n=e.name,t=e.phone,a=e.buttonHandler;return o.a.createElement("tr",null,o.a.createElement("td",null,n),o.a.createElement("td",null,t),o.a.createElement("td",null,o.a.createElement("button",{onClick:a},"Delete")))},d=function(e){var n=e.persons,t=e.deletePerson;return o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Phone"))),o.a.createElement("tbody",null,n.map(function(e){return o.a.createElement(s,{key:e.id,name:e.name,phone:e.phone,buttonHandler:function(){return t(e.id)}})})))},f=function(e){var n=e.newFilter,t=e.handleFilterChange;return o.a.createElement("div",null,o.a.createElement("input",{type:"text",value:n,onChange:t}))},m=function(e){var n=e.name,t=e.value,a=e.onChange;return o.a.createElement("div",null,o.a.createElement("h3",null,n),o.a.createElement("input",{type:"text",value:t,onChange:a,required:!0}))},p=function(e){var n=e.message,t=e.type;return""===n||""===t?null:o.a.createElement("div",{style:"error"===t?{border:"1px, solid",margin:"10px 0px",padding:"15px 10px 15px 50px",backgroundPosition:"10, center",color:"#D8000C",backgroundColor:"#FFBABA"}:{border:"1px, solid",margin:"10px 0px",padding:"15px 10px 15px 50px",backgroundPosition:"10, center",color:"#4F8A10",backgroundColor:"#DFF2BF"}},n)},E=t(2),h=t.n(E),g="/api/persons",b=function(){return h.a.get(g)},v=function(e){return h.a.post(g,e)},w=function(e,n){return h.a.put("".concat(g,"/").concat(e),n)},y=function(e){return h.a.delete("".concat(g,"/").concat(e))},C=function(){var e=Object(a.useReducer)(function(e,n){return Object(c.a)({},e,n)},{name:"",number:"",filter:"",persons:[],filteredPersons:[],notification:"",notificationType:""}),n=Object(i.a)(e,2),t=n[0],r=n[1],l=t.name,s=t.number,E=t.filter,h=t.persons,g=t.filteredPersons,C=t.notification,x=t.notificationType;Object(a.useEffect)(function(){console.log("effect"),b().then(function(e){console.log("promise fulfilled"),r({persons:e.data})})},[]);var P=function(e,n){window.confirm("".concat(e," already exists, update?"))&&w(h.find(function(n){return e.toLowerCase()===n.name.toLowerCase()}).id,n).then(function(t){r({persons:h.map(function(t){return e.toLowerCase()===t.name.toLowerCase()?n:t})})})};return console.log("filtered persons: ".concat(g,", filter: ").concat(E)),o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(p,{type:x,message:C}),o.a.createElement(f,{handleFilterChange:function(e){r({filter:e.target.value,filteredPersons:h.filter(function(e){return e.name.toLowerCase().includes(E.toLowerCase())})})},newFilter:E}),o.a.createElement("h2",null,"Add new"),o.a.createElement(u,{addPerson:function(e){e.preventDefault();var n={id:performance.now()+1,name:l,phone:s};h.filter(function(e){return l.toLowerCase()===e.name.toLowerCase()}).length>0?P(l,n):v(n).then(function(e){console.log(e.data),r({persons:h.concat(e.data),notification:"".concat(l," has been succesfully added"),notificationType:"success"}),console.log("not type: ",x),setTimeout(function(){r({notification:"",notificationType:""})},5e3)}),r({name:"",number:""})}},o.a.createElement(m,{name:"name",value:l,onChange:function(e){return r({name:e.target.value})}}),o.a.createElement(m,{name:"phone",value:s,onChange:function(e){return r({number:e.target.value})}})),o.a.createElement("h2",null,"Numbers"),o.a.createElement(d,{persons:""===E?h:g,deletePerson:function(e){y(e).then(function(){r({persons:h.filter(function(n){return n.id!==e})})}).catch(function(n){r({notification:"".concat(h.find(function(n){return n.id===e}).name," is already deleted"),notificationType:"error",persons:h.filter(function(n){return n.id!==e})}),setTimeout(function(){r({notification:"",notificationType:""})},5e3)}),console.log("deleted person ",e)}}))};l.a.render(o.a.createElement(C,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.3c201d83.chunk.js.map