(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(13),l=t.n(r),c=t(3),i=t(14),u=function(e){return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:e.addPerson},e.children,a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var n=e.name,t=e.phone,o=e.buttonHandler;return a.a.createElement("tr",null,a.a.createElement("td",null,n),a.a.createElement("td",null,t),a.a.createElement("td",null,a.a.createElement("button",{onClick:o},"Delete")))},d=function(e){var n=e.persons,t=e.deletePerson;return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Phone"))),a.a.createElement("tbody",null,n.map(function(e){return a.a.createElement(s,{key:e.id,name:e.name,phone:e.phone,buttonHandler:function(){return t(e.id)}})})))},f=function(e){var n=e.newFilter,t=e.handleFilterChange;return a.a.createElement("div",null,a.a.createElement("input",{type:"text",value:n,onChange:t}))},m=function(e){var n=e.name,t=e.value,o=e.onChange;return a.a.createElement("div",null,a.a.createElement("h3",null,n),a.a.createElement("input",{type:"text",value:t,onChange:o,required:!0}))},p=function(e){var n=e.message,t=e.type;return""===n||""===t?null:a.a.createElement("div",{style:"error"===t?{border:"1px, solid",margin:"10px 0px",padding:"15px 10px 15px 50px",backgroundPosition:"10, center",color:"#D8000C",backgroundColor:"#FFBABA"}:{border:"1px, solid",margin:"10px 0px",padding:"15px 10px 15px 50px",backgroundPosition:"10, center",color:"#4F8A10",backgroundColor:"#DFF2BF"}},n)},E=t(2),h=t.n(E),g="/api/persons",b=function(){return h.a.get(g)},v=function(e){return h.a.post(g,e)},C=function(e,n){return h.a.put("".concat(g,"/").concat(e),n)},w=function(e){return h.a.delete("".concat(g,"/").concat(e))},y=function(){var e=Object(o.useReducer)(function(e,n){return Object(c.a)({},e,n)},{name:"",number:"",filter:"",persons:[],filteredPersons:[],notification:"",notificationType:""}),n=Object(i.a)(e,2),t=n[0],r=n[1],l=t.name,s=t.number,E=t.filter,h=t.persons,g=t.filteredPersons,y=t.notification,x=t.notificationType;Object(o.useEffect)(function(){console.log("effect"),b().then(function(e){console.log("promise fulfilled"),r({persons:e.data})})},[]);var P=function(e,n){if(window.confirm("".concat(e," already exists, update?"))){var t=h.find(function(n){return e.toLowerCase()===n.name.toLowerCase()}).id;n=Object(c.a)({},n,{id:t}),C(t,n).then(function(t){console.log(t.data),r({persons:h.map(function(t){return e.toLowerCase()===t.name.toLowerCase()?n:t})})}).catch(function(e){return console.log("error react: ",e)})}};return console.log("filtered persons: ".concat(g,", filter: ").concat(E)),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(p,{type:x,message:y}),a.a.createElement(f,{handleFilterChange:function(e){r({filter:e.target.value,filteredPersons:h.filter(function(e){return e.name.toLowerCase().includes(E.toLowerCase())})})},newFilter:E}),a.a.createElement("h2",null,"Add new"),a.a.createElement(u,{addPerson:function(e){e.preventDefault();var n={name:l,phone:s};h.filter(function(e){return l.toLowerCase()===e.name.toLowerCase()}).length>0?P(l,n):v(n).then(function(e){console.log(e.data),r({persons:h.concat(e.data),notification:"".concat(l," has been succesfully added"),notificationType:"success"}),console.log("notf type: ",x),setTimeout(function(){r({notification:"",notificationType:""})},5e3)}),r({name:"",number:""})}},a.a.createElement(m,{name:"name",value:l,onChange:function(e){return r({name:e.target.value})}}),a.a.createElement(m,{name:"phone",value:s,onChange:function(e){return r({number:e.target.value})}})),a.a.createElement("h2",null,"Numbers"),a.a.createElement(d,{persons:""===E?h:g,deletePerson:function(e){w(e).then(function(){r({persons:h.filter(function(n){return n.id!==e})})}).catch(function(n){console.log("ENTERED CATCH"),r({notification:"".concat(h.find(function(n){return n.id===e}).name," is already deleted"),notificationType:"error",persons:h.filter(function(n){return n.id!==e})}),setTimeout(function(){r({notification:"",notificationType:""})},5e3)}),console.log("deleted person ",e)}}))};l.a.render(a.a.createElement(y,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.dfdc7838.chunk.js.map