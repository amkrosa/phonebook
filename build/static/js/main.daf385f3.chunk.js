(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(13),l=t.n(o),c=t(3),u=t(14),i=function(e){return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:e.addPerson},e.children,a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var n=e.name,t=e.phone,r=e.buttonHandler;return a.a.createElement("tr",null,a.a.createElement("td",null,n),a.a.createElement("td",null,t),a.a.createElement("td",null,a.a.createElement("button",{onClick:r},"Delete")))},d=function(e){var n=e.persons,t=e.deletePerson;return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Phone"))),a.a.createElement("tbody",null,n.map(function(e){return a.a.createElement(s,{key:e.id,name:e.name,phone:e.phone,buttonHandler:function(){return t(e.id)}})})))},f=function(e){var n=e.newFilter,t=e.handleFilterChange;return a.a.createElement("div",null,a.a.createElement("input",{type:"text",value:n,onChange:t}))},m=function(e){var n=e.name,t=e.value,r=e.onChange;return a.a.createElement("div",null,a.a.createElement("h3",null,n),a.a.createElement("input",{type:"text",value:t,onChange:r,required:!0}))},p=function(e){var n=e.message,t=e.type;return""===n||""===t?null:a.a.createElement("div",{style:"error"===t?{border:"1px, solid",margin:"10px 0px",padding:"15px 10px 15px 50px",backgroundPosition:"10, center",color:"#D8000C",backgroundColor:"#FFBABA"}:{border:"1px, solid",margin:"10px 0px",padding:"15px 10px 15px 50px",backgroundPosition:"10, center",color:"#4F8A10",backgroundColor:"#DFF2BF"}},n)},E=t(2),h=t.n(E),g="/api/persons",b=function(){return h.a.get(g)},v=function(e){return h.a.post(g,e)},C=function(e,n){return h.a.put("".concat(g,"/").concat(e),n)},w=function(e){return h.a.delete("".concat(g,"/").concat(e))},x=function(){var e=Object(r.useReducer)(function(e,n){return Object(c.a)({},e,n)},{name:"",number:"",filter:"",persons:[],filteredPersons:[],notification:"",notificationType:""}),n=Object(u.a)(e,2),t=n[0],o=n[1],l=t.name,s=t.number,E=t.filter,h=t.persons,g=t.filteredPersons,x=t.notification,y=t.notificationType;Object(r.useEffect)(function(){console.log("effect"),b().then(function(e){console.log("promise fulfilled"),o({persons:e.data})})},[]);var P=function(e,n){o({notification:e,notificationType:n}),setTimeout(function(){o({notification:"",notificationType:""})},5e3)},F=function(e,n){if(window.confirm("".concat(e," already exists, update?"))){var t=h.find(function(n){return e.toLowerCase()===n.name.toLowerCase()}).id;n=Object(c.a)({},n,{id:t}),C(t,n).then(function(t){o({persons:h.map(function(t){return e.toLowerCase()===t.name.toLowerCase()?n:t})})}).catch(function(e){return console.log("error react: ",e)})}};return console.log("filtered persons: ".concat(g,", filter: ").concat(E)),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(p,{type:y,message:x}),a.a.createElement(f,{handleFilterChange:function(e){o({filter:e.target.value,filteredPersons:h.filter(function(e){return e.name.toLowerCase().includes(E.toLowerCase())})})},newFilter:E}),a.a.createElement("h2",null,"Add new"),a.a.createElement(i,{addPerson:function(e){e.preventDefault();var n={name:l,phone:s};h.filter(function(e){return l.toLowerCase()===e.name.toLowerCase()}).length>0?F(l,n):v(n).then(function(e){o({persons:h.concat(e.data)}),P("".concat(l," has been succesfully added"),"success")}).catch(function(e){P(e.response.data.error,"error")}),o({name:"",number:""})}},a.a.createElement(m,{name:"name",value:l,onChange:function(e){return o({name:e.target.value})}}),a.a.createElement(m,{name:"phone",value:s,onChange:function(e){return o({number:e.target.value})}})),a.a.createElement("h2",null,"Numbers"),a.a.createElement(d,{persons:""===E?h:g,deletePerson:function(e){w(e).then(function(){o({persons:h.filter(function(n){return n.id!==e})})}).catch(function(n){console.log("ENTERED CATCH"),P("".concat(h.find(function(n){return n.id===e}).name," is already deleted"),"error"),o({persons:h.filter(function(n){return n.id!==e})})}),console.log("deleted person ",e)}}))};l.a.render(a.a.createElement(x,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.daf385f3.chunk.js.map