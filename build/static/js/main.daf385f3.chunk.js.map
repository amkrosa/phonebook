{"version":3,"sources":["components/PersonForm.js","components/Person.js","components/PhoneBook.js","components/Filter.js","components/PersonField.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["PersonForm","props","react_default","a","createElement","onSubmit","addPerson","children","type","Person","_ref","name","phone","buttonHandler","onClick","PhoneBook","persons","deletePerson","map","person","components_Person","key","id","Filter","newFilter","handleFilterChange","value","onChange","PersonField","required","Notification","message","style","border","margin","padding","backgroundPosition","color","backgroundColor","baseUrl","services_persons","axios","get","newObject","post","put","concat","delete","App","_useReducer","useReducer","state","newState","Object","objectSpread","number","filter","filteredPersons","notification","notificationType","_useReducer2","slicedToArray","updateState","useEffect","console","log","personService","then","response","data","setNotification","setTimeout","updatePerson","window","confirm","personId","find","toLowerCase","catch","error","components_Notification","components_Filter","e","target","includes","components_PersonForm","event","preventDefault","length","components_PersonField","components_PhoneBook","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.daf385f3.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    \r\n    return(\r\n    <div>\r\n        <form onSubmit={props.addPerson}>\r\n          {props.children}\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Person = ({name, phone, buttonHandler}) => {\r\n    return (\r\n    <tr>\r\n    <td>{name}</td>\r\n    <td>{phone}</td>\r\n    <td><button onClick={buttonHandler}>Delete</button></td>\r\n    </tr>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst PhoneBook = ({persons, deletePerson}) => {\r\n    const rows = () => persons.map(person => \r\n        <Person key={person.id} name={person.name} phone={person.phone} buttonHandler={()=>deletePerson(person.id)} />)\r\n\r\n    return (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Name</th>\r\n                    <th>Phone</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {rows()}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n\r\nexport default PhoneBook","import React from 'react'\r\n\r\nconst Filter = ({newFilter, handleFilterChange}) => {\r\n\r\n    return(\r\n        <div>\r\n            <input type='text' value={newFilter} onChange={handleFilterChange}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonField = ({name, value, onChange}) => {\r\n\r\n    return(\r\n        <div>\r\n        <h3>{name}</h3>\r\n        <input type='text' value={value} onChange={onChange} required/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PersonField","import React from 'react'\r\n\r\nconst Notification = ({ message, type }) => {\r\n\r\n    const error =  {\r\n\t\tborder: '1px, solid',\r\n\t\tmargin: '10px 0px',\r\n\t\tpadding: '15px 10px 15px 50px',\r\n        backgroundPosition: '10, center',\r\n        color: '#D8000C',\r\n\t\tbackgroundColor: '#FFBABA'\r\n    }\r\n\r\n    const success = {\r\n        border: '1px, solid',\r\n\t\tmargin: '10px 0px',\r\n\t\tpadding: '15px 10px 15px 50px',\r\n        backgroundPosition: '10, center',\r\n        color: '#4F8A10',\r\n\t\tbackgroundColor: '#DFF2BF'\r\n    }\r\n                 \r\n\r\n    if (message === '' || type === '') {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div style={type==='error' ? error : success}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }","import React, { useReducer, useEffect } from 'react'\r\nimport PersonForm from './components/PersonForm'\r\nimport PhoneBook from './components/PhoneBook'\r\nimport Filter from './components/Filter'\r\nimport PersonField from './components/PersonField'\r\nimport Notification from './components/Notification'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n\r\n  const [ state, updateState ] = useReducer(\r\n    (state, newState) => ({...state, ...newState}),\r\n    {name: '', number: '', filter: '', persons: [], filteredPersons: [], notification: '', notificationType: '',\r\n    }\r\n  )\r\n\r\n  const { name, number, filter, persons, filteredPersons, notification, notificationType } = state\r\n\r\n  useEffect(() => {\r\n    console.log('effect')\r\n    personService.getAll()\r\n    .then(response => {\r\n      console.log('promise fulfilled')\r\n      updateState( { persons: response.data } )\r\n    })\r\n  }, [])\r\n\r\n  const setNotification = (message, type) => {\r\n    updateState({ notification: message, \r\n        notificationType: type })\r\n      setTimeout(() => {\r\n        updateState({ notification: '', notificationType: ''})\r\n      }, 5000);\r\n  }\r\n  \r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const newObject = {\r\n      name: name,\r\n      phone: number,\r\n    }\r\n    persons.filter(person=>name.toLowerCase()===person.name.toLowerCase()).length > 0\r\n    ? updatePerson(name, newObject)\r\n    : personService\r\n    .create(newObject)\r\n    .then(response=>{\r\n      updateState({ persons: persons.concat(response.data) })\r\n      setNotification(`${name} has been succesfully added`, 'success')\r\n    })\r\n    .catch(error=>{\r\n      setNotification(error.response.data.error, 'error')\r\n    })\r\n    updateState({ name: '', number: '' })\r\n  }\r\n\r\n  const updatePerson = (name, newObject) => {\r\n    if (window.confirm(`${name} already exists, update?`)){\r\n      const personId = persons.find(person=>name.toLowerCase()===person.name.toLowerCase()).id\r\n      newObject = {...newObject,\r\n                    id: personId}\r\n      personService.update(personId, newObject)\r\n        .then(response=>{\r\n        updateState({ \r\n          persons: persons.map(person => name.toLowerCase()===person.name.toLowerCase() ? \r\n          newObject : \r\n          person) })\r\n      })\r\n      .catch(error=>console.log('error react: ',error))\r\n    }\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n      personService.deletePerson(id)\r\n      .then(()=>{\r\n        updateState({ persons: persons.filter(person=>person.id!==id)})   \r\n      })\r\n      .catch(error => {\r\n        console.log('ENTERED CATCH')\r\n        setNotification(`${persons.find(person => person.id === id).name} is already deleted`, 'error')\r\n        updateState({ persons: persons.filter(person=>person.id!==id) })\r\n      })\r\n      console.log('deleted person ', id)\r\n  }\r\n\r\n  const handleFilterChange = e => {\r\n    updateState({\r\n      filter: e.target.value, \r\n      filteredPersons: persons.filter(person=>\r\n        person.name.toLowerCase().includes(filter.toLowerCase())\r\n        )\r\n      }\r\n    )\r\n  }\r\n\r\n\r\n  console.log(`filtered persons: ${filteredPersons}, filter: ${filter}`);\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification type={notificationType} message={notification}/>\r\n      <Filter\r\n        handleFilterChange={handleFilterChange}\r\n        newFilter={filter}/>\r\n      <h2>Add new</h2>\r\n      <PersonForm addPerson={addPerson}>\r\n        <PersonField name='name' value={name} onChange={e => updateState({ name: e.target.value })}/>\r\n        <PersonField name='phone' value={number} onChange={e => updateState({ number: e.target.value })}/>\r\n      </PersonForm>\r\n        \r\n      <h2>Numbers</h2>\r\n      <PhoneBook persons={filter==='' ? persons : filteredPersons} deletePerson={deletePerson}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}